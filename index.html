<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>피해자행위 및 온톨로지 스캠 데이터기반 실시간 사기탐지 설득 시스템</title>

    <!-- Open Graph 메타데이터 -->
    <meta property="og:title" content="피해자행위 및 온톨로지 스캠 데이터기반 실시간 사기탐지 설득 시스템" />
    <meta property="og:description" content="행위 메타데이터 분석을 통한 보이스피싱 선제 탐지 및 피해 예방 시스템" />
    <meta property="og:image" content="/og-image.png" />
    <meta property="og:type" content="website" />
    <meta property="og:locale" content="ko_KR" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="피해자행위 및 온톨로지 스캠 데이터기반 실시간 사기탐지 설득 시스템" />
    <meta name="twitter:description" content="행위 메타데이터 분석을 통한 보이스피싱 선제 탐지 및 피해 예방 시스템" />
    <meta name="twitter:image" content="/og-image.png" />

    <!-- 기본 메타 설명 -->
    <meta name="description" content="행위 메타데이터 분석을 통한 보이스피싱 선제 탐지 및 피해 예방 시스템" />
  </head>
  <body>
    <div id="root"></div>

    <!-- 카카오톡/라인/인스타그램 등 인앱 브라우저 감지 및 외부 브라우저로 리다이렉트 -->
    <script>
      (function() {
        var userAgent = navigator.userAgent || navigator.vendor || window.opera;

        // 인앱 브라우저 감지 (카카오톡, 라인, 인스타그램, 페이스북 등)
        var isKakao = /KAKAOTALK/i.test(userAgent);
        var isLine = /Line\//i.test(userAgent);
        var isInsta = /Instagram/i.test(userAgent);
        var isFacebook = /FBAN|FBAV/i.test(userAgent);
        var isNaver = /NAVER/i.test(userAgent);
        var isInAppBrowser = isKakao || isLine || isInsta || isFacebook || isNaver;

        if (isInAppBrowser) {
          var currentUrl = window.location.href;
          var encodedUrl = encodeURIComponent(currentUrl);

          // Android 감지
          if (/android/i.test(userAgent)) {
            // 카카오톡 Android: 외부 브라우저로 열기 스킴
            if (isKakao) {
              location.href = 'kakaotalk://web/openExternal?url=' + encodedUrl;
              return;
            }

            // 기타 Android 인앱 브라우저: intent:// 스킴으로 Chrome에서 열기
            var intentUrl = 'intent://' + currentUrl.replace(/https?:\/\//i, '') +
              '#Intent;scheme=https;package=com.android.chrome;S.browser_fallback_url=' + encodedUrl + ';end';

            location.href = intentUrl;

            // 실패 시 안내 페이지 표시
            setTimeout(function() {
              var samsungUrl = 'intent://' + currentUrl.replace(/https?:\/\//i, '') +
                '#Intent;scheme=https;package=com.sec.android.app.sbrowser;end';

              document.body.innerHTML = '<div style="display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;padding:20px;text-align:center;font-family:-apple-system,BlinkMacSystemFont,sans-serif;background:#f5f5f5;">' +
                '<div style="background:white;padding:30px;border-radius:16px;box-shadow:0 4px 20px rgba(0,0,0,0.1);max-width:400px;">' +
                '<h2 style="margin:0 0 16px;color:#333;">외부 브라우저에서 열어주세요</h2>' +
                '<p style="margin:0 0 20px;color:#666;line-height:1.6;">이 앱은 인앱 브라우저에서 정상적으로 동작하지 않습니다.</p>' +
                '<div style="display:flex;flex-direction:column;gap:10px;">' +
                '<a href="' + intentUrl + '" style="display:block;padding:14px 24px;background:#4285f4;color:white;text-decoration:none;border-radius:8px;font-weight:600;">Chrome에서 열기</a>' +
                '<a href="' + samsungUrl + '" style="display:block;padding:14px 24px;background:#1428a0;color:white;text-decoration:none;border-radius:8px;font-weight:600;">삼성 인터넷에서 열기</a>' +
                '</div>' +
                '<p style="margin:20px 0 0;font-size:12px;color:#999;">또는 우측 상단 메뉴(⋮)에서<br>"다른 브라우저로 열기"를 선택하세요</p>' +
                '</div></div>';
            }, 1500);
          }
          // iOS 감지
          else if (/iPhone|iPad|iPod/i.test(userAgent)) {
            // 카카오톡 iOS: 외부 브라우저로 열기 스킴
            if (isKakao) {
              location.href = 'kakaotalk://web/openExternal?url=' + encodedUrl;
              return;
            }

            // 라인 iOS
            if (isLine) {
              location.href = 'https://line.me/R/nv/web?url=' + encodedUrl;
              return;
            }

            // 페이스북/인스타그램 iOS: Safari 열기 시도
            // Safari URL 스킴 시도 (일부 환경에서만 동작)
            var safariUrl = 'x-safari-' + currentUrl;
            location.href = safariUrl;

            // 실패 시 안내 페이지 표시
            setTimeout(function() {
              document.body.innerHTML = '<div style="display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;padding:20px;text-align:center;font-family:-apple-system,BlinkMacSystemFont,sans-serif;background:#f5f5f5;">' +
                '<div style="background:white;padding:30px;border-radius:16px;box-shadow:0 4px 20px rgba(0,0,0,0.1);max-width:400px;">' +
                '<h2 style="margin:0 0 16px;color:#333;">Safari에서 열기</h2>' +
                '<p style="margin:0 0 20px;color:#666;line-height:1.6;">이 앱은 인앱 브라우저에서 정상적으로 동작하지 않습니다.</p>' +
                '<a href="' + currentUrl + '" target="_system" style="display:block;padding:14px 24px;background:#007aff;color:white;text-decoration:none;border-radius:8px;font-weight:600;margin-bottom:12px;">Safari에서 열기</a>' +
                '<div style="background:#f8f9fa;padding:16px;border-radius:8px;text-align:left;margin-top:8px;">' +
                '<p style="margin:0 0 8px;font-weight:600;color:#333;font-size:14px;">버튼이 작동하지 않으면:</p>' +
                '<ol style="margin:0;padding-left:20px;color:#666;line-height:1.6;font-size:13px;">' +
                '<li>우측 하단 <strong>⋯</strong> 버튼 탭</li>' +
                '<li><strong>"Safari로 열기"</strong> 선택</li>' +
                '</ol>' +
                '</div>' +
                '</div></div>';
            }, 500);
          }
        }
      })();
    </script>

    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
