# í”„ë¡ íŠ¸ì—”ë“œ TypeScript êµ¬í˜„ ì™„ë£Œ ìš”ì•½

## âœ… êµ¬í˜„ ì™„ë£Œ í•­ëª©

### 1. API íƒ€ì… ì •ì˜ (`src/types/api.ts`)

#### POST /api/analyze
- **Request**: `AnalyzeRequest`
  - `text`: string - ë¶„ì„í•  í…ìŠ¤íŠ¸
  - `signals`: `InputSignals` - í–‰ìœ„ ë©”íƒ€ë°ì´í„°
    - `wasPasted`: boolean - ë¶™ì—¬ë„£ê¸° ì—¬ë¶€
    - `typingSpeedCps`: number - íƒ€ì´í•‘ ì†ë„ (ë¬¸ì/ì´ˆ)
    - `backspaceCount`: number - ë°±ìŠ¤í˜ì´ìŠ¤ íšŸìˆ˜
    - `focusBlurCount`: number - í¬ì»¤ìŠ¤/ë¸”ëŸ¬ íšŸìˆ˜
    - `fieldHops`: number - í•„ë“œ ê°„ ì´ë™ íšŸìˆ˜
    - `durationMs`: number - ì…ë ¥ ì†Œìš” ì‹œê°„
  - `client`: `ClientInfo` - í´ë¼ì´ì–¸íŠ¸ ì •ë³´
    - `userAgent`: string
    - `locale?`: string

- **Response**: `AnalyzeResponse`
  - `riskScore`: number (0~100)
  - `riskLevel`: "low" | "medium" | "high"
  - `reasons`: Array<{ code, message, weight }>
  - `extracted`: { amount?, bankHint?, accountMasked?, urlDetected? }
  - `recommendations`: string[]

#### POST /api/verify
- **Request**: `VerifyRequest`
  - `checklist`: `VerifyChecklist` - boolean í”Œë˜ê·¸ ê°ì²´
  - `hasScreenshot`: boolean
  - `screenshotFile?`: File | null (í–¥í›„ í™•ì¥ìš©)

- **Response**: `VerifyResponse`
  - `nextAction`: "block" | "warn" | "allow"
  - `message`: string

### 2. ìŠ¤í¬ë¦°ìƒ· ì²˜ë¦¬ Hook (`src/hooks/useScreenshot.ts`)

âœ… **MVP êµ¬í˜„**: ë¡œì»¬ ë¯¸ë¦¬ë³´ê¸°ë§Œ ì œê³µ
- `screenshot.file`: ì„ íƒëœ íŒŒì¼
- `screenshot.previewUrl`: blob URL
- `screenshot.isLoading`: ë¡œë”© ìƒíƒœ
- `screenshot.error`: ì—ëŸ¬ ë©”ì‹œì§€

âœ… **ì£¼ìš” ê¸°ëŠ¥**:
- `handleFileSelect()`: íŒŒì¼ ì„ íƒ í•¸ë“¤ëŸ¬
- `clearScreenshot()`: ìŠ¤í¬ë¦°ìƒ· ì œê±°
- `validateFile()`: íŒŒì¼ ìœ íš¨ì„± ê²€ì‚¬ (íƒ€ì…, í¬ê¸° 10MB ì œí•œ)

â³ **í–¥í›„ í™•ì¥**:
- `uploadScreenshotToBackend()` í•¨ìˆ˜ ì¤€ë¹„ (ë¯¸êµ¬í˜„)
- FormDataë¡œ ë°±ì—”ë“œ ì—…ë¡œë“œ ê°€ëŠ¥í•˜ë„ë¡ êµ¬ì¡°í™”

### 3. API í´ë¼ì´ì–¸íŠ¸ (`src/services/apiClient.ts`)

âœ… **êµ¬í˜„ëœ í•¨ìˆ˜**:
- `analyzeText(request)`: POST /api/analyze í˜¸ì¶œ
- `verifyTransaction(request)`: POST /api/verify í˜¸ì¶œ
- `ApiException` í´ë˜ìŠ¤: ì—ëŸ¬ ì²˜ë¦¬

âœ… **ê¸°ëŠ¥**:
- ê³µí†µ HTTP ìš”ì²­ ë˜í¼
- ì—ëŸ¬ ì²˜ë¦¬ ë° ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ê°ì§€
- í™˜ê²½ ë³€ìˆ˜ ì§€ì› (`REACT_APP_API_URL`)

â³ **í–¥í›„ í™•ì¥**:
- `uploadScreenshot()` í•¨ìˆ˜ ì¤€ë¹„ (ë¯¸êµ¬í˜„)

### 4. í–‰ìœ„ ë©”íƒ€ë°ì´í„° ìˆ˜ì§‘ (`src/utils/behaviorTracker.ts`)

âœ… **BehaviorTracker í´ë˜ìŠ¤**:
- ì…ë ¥ í•„ë“œì—ì„œ ì‚¬ìš©ì í–‰ìœ„ ì¶”ì 
- íƒ€ì´í•‘ ì†ë„, ë°±ìŠ¤í˜ì´ìŠ¤, í¬ì»¤ìŠ¤/ë¸”ëŸ¬ ë“± ìë™ ìˆ˜ì§‘
- ë¶™ì—¬ë„£ê¸° ê°ì§€
- í•„ë“œ ê°„ ì´ë™ ê°ì§€

âœ… **React Hook**:
- `useBehaviorTracker(inputRef)`: Reactì—ì„œ ì‰½ê²Œ ì‚¬ìš©

âœ… **ì£¼ìš” ë©”ì„œë“œ**:
- `getSignals()`: ìˆ˜ì§‘ëœ ë°ì´í„° ë°˜í™˜
- `reset()`: ë°ì´í„° ì´ˆê¸°í™”
- `destroy()`: ë¦¬ì†ŒìŠ¤ ì •ë¦¬

### 5. ì˜ˆì‹œ ì»´í¬ë„ŒíŠ¸

#### `src/examples/AnalyzeExample.tsx`
- ì†¡ê¸ˆ í…ìŠ¤íŠ¸ ì…ë ¥ ë° ë¶„ì„
- í–‰ìœ„ ë©”íƒ€ë°ì´í„° ìë™ ìˆ˜ì§‘
- API í˜¸ì¶œ ë° ê²°ê³¼ í‘œì‹œ
- ê³ ìœ„í—˜ ì‹œ ì¶”ê°€ ê²€ì¦ ì•ˆë‚´

#### `src/examples/VerifyExample.tsx`
- ì²´í¬ë¦¬ìŠ¤íŠ¸ UI (4ê°œ ì§ˆë¬¸)
- ìŠ¤í¬ë¦°ìƒ· ì—…ë¡œë“œ (ë¡œì»¬ ë¯¸ë¦¬ë³´ê¸°)
- ê²€ì¦ ê²°ê³¼ í‘œì‹œ
- NextActionì— ë”°ë¥¸ UI ë³€ê²½

## ğŸ“ ìµœì¢… íŒŒì¼ êµ¬ì¡°

```
Front_BehaviorMetaPhishingPreTX/
â”œâ”€â”€ Design/
â”œâ”€â”€ DesignGuide.md
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â””â”€â”€ api.ts                  âœ… API íƒ€ì… ì •ì˜
â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â””â”€â”€ useScreenshot.ts        âœ… ìŠ¤í¬ë¦°ìƒ· Hook
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â””â”€â”€ apiClient.ts            âœ… API í´ë¼ì´ì–¸íŠ¸
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â””â”€â”€ behaviorTracker.ts      âœ… í–‰ìœ„ ì¶”ì  ìœ í‹¸
â”‚   â”œâ”€â”€ examples/
â”‚   â”‚   â”œâ”€â”€ AnalyzeExample.tsx      âœ… ë¶„ì„ ì˜ˆì‹œ
â”‚   â”‚   â””â”€â”€ VerifyExample.tsx       âœ… ê²€ì¦ ì˜ˆì‹œ
â”‚   â””â”€â”€ README.md                    âœ… ì‚¬ìš© ê°€ì´ë“œ
â”œâ”€â”€ package.json.template            âœ… íŒ¨í‚¤ì§€ ì„¤ì • í…œí”Œë¦¿
â”œâ”€â”€ tsconfig.json.template           âœ… TS ì„¤ì • í…œí”Œë¦¿
â””â”€â”€ êµ¬í˜„_ì™„ë£Œ_ìš”ì•½.md                âœ… ì´ ë¬¸ì„œ
```

## ğŸš€ ì‚¬ìš© ë°©ë²•

### 1. í”„ë¡œì íŠ¸ ì´ˆê¸°í™” (í•„ìš”ì‹œ)

```bash
# package.json.templateì„ package.jsonìœ¼ë¡œ ë³µì‚¬
cp package.json.template package.json

# tsconfig.json.templateì„ tsconfig.jsonìœ¼ë¡œ ë³µì‚¬
cp tsconfig.json.template tsconfig.json

# ì˜ì¡´ì„± ì„¤ì¹˜
npm install
```

### 2. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

`.env` íŒŒì¼ ìƒì„±:
```env
REACT_APP_API_URL=http://localhost:3000
```

### 3. ì˜ˆì‹œ ì»´í¬ë„ŒíŠ¸ ì‚¬ìš©

```tsx
import { AnalyzeExample } from './examples/AnalyzeExample';
import { VerifyExample } from './examples/VerifyExample';

function App() {
  return (
    <div>
      <AnalyzeExample />
      {/* ë˜ëŠ” */}
      <VerifyExample />
    </div>
  );
}
```

## ğŸ“ MVP vs í–¥í›„ í™•ì¥

### âœ… MVP (í˜„ì¬ êµ¬í˜„)
- API íƒ€ì… ì •ì˜ ì™„ë£Œ
- í–‰ìœ„ ë©”íƒ€ë°ì´í„° ìˆ˜ì§‘ (ë¡œì»¬)
- ìŠ¤í¬ë¦°ìƒ· ë¡œì»¬ ë¯¸ë¦¬ë³´ê¸°
- API í†µì‹  í´ë¼ì´ì–¸íŠ¸
- ì˜ˆì‹œ ì»´í¬ë„ŒíŠ¸ (ë¶„ì„, ê²€ì¦)

### â³ í–¥í›„ í™•ì¥ (êµ¬ì¡°ë§Œ ì¤€ë¹„)
- ìŠ¤í¬ë¦°ìƒ· ë°±ì—”ë“œ ì—…ë¡œë“œ
  - `uploadScreenshotToBackend()` í•¨ìˆ˜ í™œì„±í™”
  - FormDataë¡œ ì „ì†¡
  - ë°±ì—”ë“œ `/api/upload-screenshot` ì—”ë“œí¬ì¸íŠ¸ êµ¬í˜„ í•„ìš”

- ì‹¤ì‹œê°„ ìœ„í—˜ë„ ëª¨ë‹ˆí„°ë§
- ì˜¤í”„ë¼ì¸ ëª¨ë“œ ì§€ì›
- ë¶„ì„ ê²°ê³¼ íˆìŠ¤í† ë¦¬

## ğŸ”§ ì£¼ìš” íŠ¹ì§•

1. **ì™„ì „í•œ íƒ€ì… ì•ˆì •ì„±**
   - ëª¨ë“  API ìš”ì²­/ì‘ë‹µì— TypeScript íƒ€ì… ì •ì˜
   - ì»´íŒŒì¼ íƒ€ì„ì— ì—ëŸ¬ ê°ì§€

2. **ìë™ í–‰ìœ„ ìˆ˜ì§‘**
   - `BehaviorTracker` í´ë˜ìŠ¤ê°€ ìë™ìœ¼ë¡œ ë©”íƒ€ë°ì´í„° ìˆ˜ì§‘
   - React Hookìœ¼ë¡œ ì‰½ê²Œ í†µí•©

3. **ìŠ¤í¬ë¦°ìƒ· ë¡œì»¬ ì²˜ë¦¬**
   - MVPì—ì„œëŠ” í´ë¼ì´ì–¸íŠ¸ì—ì„œë§Œ ì²˜ë¦¬
   - ë°±ì—”ë“œ ì—…ë¡œë“œëŠ” í–¥í›„ í™•ì¥ ê°€ëŠ¥í•˜ë„ë¡ êµ¬ì¡°í™”

4. **ì—ëŸ¬ ì²˜ë¦¬**
   - `ApiException` í´ë˜ìŠ¤ë¡œ í†µì¼ëœ ì—ëŸ¬ ì²˜ë¦¬
   - ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜, API ì˜¤ë¥˜ êµ¬ë¶„

5. **ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì»´í¬ë„ŒíŠ¸**
   - ì˜ˆì‹œ ì»´í¬ë„ŒíŠ¸ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì‹¤ì œ í™”ë©´ êµ¬í˜„ ê°€ëŠ¥
   - ë””ìì¸ ê°€ì´ë“œì™€ ì¼ì¹˜í•˜ëŠ” ìŠ¤íƒ€ì¼

## ğŸ“š ì°¸ê³  ë¬¸ì„œ

- `src/README.md`: ìƒì„¸ ì‚¬ìš© ê°€ì´ë“œ
- `DesignGuide.md`: UI/UX ë””ìì¸ ê°€ì´ë“œ
- `src/types/api.ts`: ëª¨ë“  íƒ€ì… ì •ì˜

## ğŸ¯ ë‹¤ìŒ ë‹¨ê³„

1. **ë°±ì—”ë“œ API êµ¬í˜„**
   - POST /api/analyze
   - POST /api/verify
   - (ì„ íƒ) POST /api/upload-screenshot

2. **ì‹¤ì œ í™”ë©´ ê°œë°œ**
   - ì˜ˆì‹œ ì»´í¬ë„ŒíŠ¸ë¥¼ ì°¸ê³ í•˜ì—¬ ì‹¤ì œ UI êµ¬í˜„
   - ë””ìì¸ ê°€ì´ë“œì— ë”°ë¥¸ ìŠ¤íƒ€ì¼ ì ìš©

3. **í…ŒìŠ¤íŠ¸**
   - API í†µí•© í…ŒìŠ¤íŠ¸
   - í–‰ìœ„ ë©”íƒ€ë°ì´í„° ìˆ˜ì§‘ ì •í™•ì„± ê²€ì¦

4. **ë°°í¬**
   - í™˜ê²½ ë³€ìˆ˜ ì„¤ì • (í”„ë¡œë•ì…˜ API URL)
   - ë¹Œë“œ ë° ë°°í¬
